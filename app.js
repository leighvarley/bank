// Generated by CoffeeScript 1.10.0
(function() {
  $(function() {
    var bank;
    bank = {
      makeTransaction: function() {
        var balanceDiv, startingBalance, total, updateThePage, userInput, userInputField;
        balanceDiv = $(this).siblings("div.balance");
        startingBalance = parseFloat(balanceDiv.text().replace("$", ""));
        userInputField = $(this).siblings("input.userInput");
        userInput = parseFloat(userInputField.val());
        if ($(this).hasClass("deposit")) {
          total = startingBalance + (userInput || 0);
        } else {
          if (startingBalance >= userInput) {
            total = startingBalance - (userInput || 0);
          } else {
            total = startingBalance;
          }
        }
        updateThePage = (function(_this) {
          return function() {
            balanceDiv.html("<h2>$" + total.toFixed(2) + "</h2>");
            if (($(_this).hasClass("withdrawal")) && (userInput > startingBalance)) {
              balanceDiv.append("<p>Insufficient Funds!</p>");
            }
            return userInputField.val("");
          };
        })(this);
        return updateThePage();
      }
    };
    return $("[type=button]").on("click", bank.makeTransaction);
  });

}).call(this);
